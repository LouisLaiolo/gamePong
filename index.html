<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>NOT FF7 REMAKE</title>
    <link href="css/style.css" rel="stylesheet" />
    <meta name="description" content="M1 - PONG" />
    <meta name="author" content="Laiolo_Louis" />
  </head>
  <body>
    <script src="socket.io-client/dist/socket.io.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function(event) { 
        const socket = io("http://localhost:3000");
        var play = document.getElementById("Login_Register");
        var info = document.getElementById("info");
        play.onclick = function() { gameUserName() };
        function gameUserName(){
          var nickname = document.getElementById("userName").value;
          if (nickname.length != 0){
            socket.emit("login_register", {
              username: nickname,
            });
          }
        }
        socket.on("logged_in", function(){
          window.location.replace("/menu");
        });
        socket.on("invalid", function(){
           info.divInfo.innerHTML = "[ <b>ERREUR</b> - Identifiant invalide ! ]";
        });
        socket.on("error", function(){
          info.divInfo.innerHTML = "[ <b>ERREUR</b> - Une erreur est survenue ! ]";
        });
    });
    </script>
    <div id="title"><h1>NOT FF7 REMAKE</h1></div>
    <div id="info"><p>Laiolo Louis - M1 MIAGE APP</p></div>
    <div id="blocAuth">
      <div class="n_log_in">
        <input type="text" id="userName" placeholder="Username..." minlength="4" maxlength="12" required/>
        <button id="Login_Register">PLAY</button>
      </div>
    </div>
    </div>
  </body>
</html>
